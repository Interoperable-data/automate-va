# https://github.com/ULB-Darmstadt/shacl-form
@prefix dash:    <http://datashapes.org/dash#> .
@prefix dbpedia: <http://dbpedia.org/ontology/> .
@prefix dcat:    <http://www.w3.org/ns/dcat#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix foaf:    <http://xmlns.com/foaf/0.1/> .
@prefix geo:     <http://www.opengis.net/ont/geosparql#> .
@prefix org:     <https://www.w3.org/ns/org#> .
@prefix owl:     <http://www.w3.org/2002/07/owl#> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema:  <http://schema.org/> .
@prefix sh:      <http://www.w3.org/ns/shacl#> .
@prefix skos:    <http://www.w3.org/2004/02/skos/core#> .
@prefix xsd:     <http://www.w3.org/2001/XMLSchema#> .
@prefix prov:    <http://www.w3.org/ns/prov#> .
@prefix ex:      <http://example.org/> .
@prefix as:      <https://www.w3.org/ns/activitystreams#> .
@prefix eraUi:   <http://data.europa.eu/949/ui/> .
@prefix locn:    <http://www.w3.org/ns/locn#> .


@prefix era:      <http://data.europa.eu/949/> .
@prefix era-sh:   <http://data.europa.eu/949/shapes/> .
@prefix era-cert: <http://data.europa.eu/949/evidences/> .
@prefix era-ecd: <http://data.europa.eu/949/evidences/ecds/> .
@prefix era-cld: <http://data.europa.eu/949/evidences/clds/> .


# Minimal placeholder shapes to bootstrap the Objects of Assessments view.
era-sh:AssessmentDeclarationShape a sh:NodeShape ;
  sh:targetClass era:ECDeclaration ;
  rdfs:label "EC declaration"@en ;
  rdfs:comment "Add a reference to an EC Declaration. If not yet available, you can link the underlying CLD's too."@en ;
  dash:stem era-ecd: ;
  dcterms:source <https://era-dev.ontotext.com/repositories/ERADIS-KG> ;
  
  sh:property [
    sh:path dcterms:identifier ;
    sh:name "Document ID number"@en ;
    sh:datatype xsd:string ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:message "Document ID number of the EC Declaration"@en
  ] ;

  sh:property [
    sh:path skos:prefLabel ;
    sh:name "Object of the ECD"@en ;
    sh:datatype xsd:string ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:message "ECD object MUST be provided"@en
  ] ;

  sh:property [
    sh:path era:issuedOn ;
    sh:name "Issued on"@en ;
    sh:datatype xsd:date ;
    sh:nodeKind sh:Literal ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:message "Issue date MUST be provided"@en
  ] ;
  sh:property [
    sh:path dcterms:requires ;
    sh:name "Subsystem certificates collection"@en ;
    sh:class era:CABEvidence ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
    sh:maxCount 1
  ] ;
  sh:closed false .

era-sh:AssessmentCertificateShape a sh:NodeShape ;
  sh:targetClass era:CLD ;
  rdfs:label "EC certificate"@en ;
  rdfs:comment "Add EC certifiate references, and link them to the Declarations"@en ;
  dash:stem era-cld: ;
  dcterms:source <https://era-dev.ontotext.com/repositories/ERADIS-KG> ;

  sh:property [
    sh:path dcterms:identifier ;
    sh:name "Certificate number"@en ;
    sh:datatype xsd:string ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:message "Certificate number of the EC Certificate"@en
  ] ;
  
  sh:property [
    sh:path skos:prefLabel ;
    sh:name "Certificate label"@en ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1
  ] ;

  sh:property [
    sh:path dcterms:issued ;
    sh:name "Issued on"@en ;
    sh:datatype xsd:date ;
    sh:minCount 0 ;
    sh:maxCount 1
  ] ;

  sh:property [
    sh:path dcterms:related ;
    sh:name "In Evidence collection"@en ;
    sh:class era:CABEvidence ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
    sh:maxCount 1
  ] ;
  sh:closed false .

era-sh:CLDCollectionShape a sh:NodeShape ;
  sh:targetClass era:CABEvidence ;
  rdfs:label "CLD Collection"@en ;
  rdfs:comment "Group CLDs which ogether support a EC Declaration."@en ;
  dash:stem era-cert: ;
  sh:property [
    sh:path skos:prefLabel ;
    sh:name "Collection name"@en ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1
  ] ;
  sh:property [
    sh:path rdfs:comment ;
    sh:name "Collection description"@en ;
    sh:datatype xsd:string ;
    sh:minCount 0 ;
    sh:maxCount 1
  ] ;
  sh:property [
    sh:path rdfs:member ;
    sh:name "Combined CLDs"@en ;
    sh:description "Select the CLDs to link together to a EC Declaration."@en ;
    sh:nodeKind sh:IRI ;
    sh:class era:CLD ;
    sh:minCount 0 ;
    sh:maxCount 10
  ] ;
  sh:property [
    sh:path dcterms:isReuiredBy ;
    sh:name "Supported EC Declaration"@en ;
    sh:description "Select the EC Declaration to link these CLDs to."@en ;
    sh:nodeKind sh:IRI ;
    sh:class era:ECDeclaration ;
    sh:minCount 0 ;
    sh:maxCount 1
  ] ;
  sh:closed false .
