@base <http://data.europa.eu/949/> .
@prefix era: <http://data.europa.eu/949/> .
@prefix gotham: <https://batman.fandom.com/wiki/> .

# General
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix gr: <http://purl.org/goodrelations/v1#> .
@prefix org: <http://www.w3.org/ns/org#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix time: <http://www.w3.org/2006/time#> .
@prefix unit: <http://qudt.org/vocab/unit/> .
@prefix vpa: <http://w3id.org/vpa#> .
@prefix vs: <http://www.w3.org/2003/06/sw-vocab-status/ns#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# Domain-specific
@prefix era-cld: <http://data.europa.eu/949/eradis/clds/> .
@prefix era-ecd: <http://data.europa.eu/949/eradis/declarations/> .
@prefix era-cfg: <http://data.europa.eu/949/vehicleTypeConfigurations/> .
@prefix eralex: <http://data.europa.eu/949/requirements/> .
@prefix rorg: <http://data.europa.eu/949/organisations/> .
@prefix lorg: <http://data.europa.eu/949/organisations/sites/> .
@prefix uorg: <http://data.europa.eu/949/organisations/units/> .
@prefix eratv: <http://data.europa.eu/949/vehicleTypes/> .
@prefix erava: <http://data.europa.eu/949/vehicleTypes/authorisations/> .
@prefix eravr: <http://data.europa.eu/949/vehicles/registrations/> .
@prefix evr: <http://data.europa.eu/949/vehicles/> .

# Relevant SKOS Concept Schemes
@prefix era-skos: <http://data.europa.eu/949/concepts/> .
@prefix era-cld-types: <http://data.europa.eu/949/concepts/cld-types/> .
@prefix era-ecd-types: <http://data.europa.eu/949/concepts/ecd-types/> .
@prefix era-cld-modules: <http://data.europa.eu/949/concepts/cld-modules/> .
@prefix era-organisation-roles: <http://data.europa.eu/949/concepts/organisation-roles/> .
@prefix era-states: <http://data.europa.eu/949/concepts/states/> .
@prefix era-va-authcase: <http://data.europa.eu/949/concepts/va-authcases/> .
@prefix era-vtc: <http://data.europa.eu/949/concepts/vehicle-type-configurations/> .
@prefix era-vehicle-types-eratv: <http://data.europa.eu/949/concepts/vehicle-types/eratv/> .
@prefix era-ntg-rinf: <http://data.europa.eu/949/concepts/nominal-track-gauges/rinf/> .
@prefix era-ess-rinf: <http://data.europa.eu/949/concepts/energy-supply-systems/rinf/> .
@prefix era-noic: <http://data.europa.eu/949/concepts/noise-categories/NoiseCategories/> .
@prefix era-va-trm: <http://data.europa.eu/949/concepts/va-type-registration-methods/> .

# The VehicleType is in DRAFT and being created.
rorg:MF-US-GC001-224 a era:Body ; # Wayne Industries, Gotham City, USA (era:Body, see above)
  rdfs:label "Wayne Industries" ;
  org:hasSite lorg:MF-US-GC002-225 .

lorg:MF-US-GC002-225 a org:Site ;
  rdfs:label "Wayne Industries secret plant" .

rorg:NoBo-US-0001 a era:Body ; # the NoBo and DeBo
  rdfs:label "Robin Boy Wonder CA Body" .

rorg:EUAR a era:Body ;
  rdfs:label "EU Agency for Railways" .

eratv:vt-71-001-0001-1-001 a era:VehicleType ;
  dcterms:identifier "71-001-0001-1-001" ;
  dcterms:created "2025-07-16"^^xsd:date ;
  # dcterms:issued SHALL NOT BE PRESENT, given the type is in DRAFT, and many parameters are still being filled in.
  rdfs:label "A non-existent self-propelled special vehicle";
  era:vehicleTypeCategory era-vehicle-types-eratv:71 ; # special vehicles
  era:vehicleTypeSubCategory era-vehicle-types-eratv:selfPropelledSpecialVehicle ;
  era:vehicleTypeManufacturer [
    a era:OrganisationRole ;
    era:roleOf rorg:MF-US-GC001-224 ;  
    era:hasOrganisationRole era-organisation-roles:Manufacturer
  ] ;
  era:wheelSetGauge era-ntg-rinf:30 ;
  era:energySupplySystem era-ess-rinf:DC30 ;
  era:vehicleTypePlatform "Batman Rail Vehicles"@en .

eratv:BatmanSpecial a era:VehicleTypeConfiguration ;
  rdfs:label "3kV on US Standard Gauge";
  era:wheelSetGauge era-ntg-rinf:30 ;
  era:energySupplySystem era-ess-rinf:DC30 .

evr:bat-mobile-metro-001 a era:Vehicle ;
  dcterms:identifier "Wayne Railway Mobile 001-01" ;
  era:vehicleKeeper [ a era:OrganisationRole ; era:roleOf rorg:MF-US-GC001-224 ; era:hasRole era-organisation-roles:Keeper ] ;
  era:vehicleType eratv:vt-71-001-0001-1-002 ; # this typo should be detected through its authorisation chain.
  era:compositeBrakeBlockRetrofitted true ;
  era:vehicleNumber "01234567890-9" ; # should raise several problems
  era:vehicleSeries "Wayne Railway Attack vehicles, series 001"@en ;
  era:operationalRestriction era-noic:2-7-7 . # it is too loud

erava:va-71-001-0001-1-001-US-1 a era:VehicleTypeAuthorisationApplication ; # subClassOf vpa:Request ;
  rdfs:label "Authorisation project of the Batman spacial railway Vehicle"@de ;
  era:preEngagementBaseline [ a era:preEngagement ; era:hasPreEngagementBaseline false ];
  dcterms:creator [ a era:OrganisationRole ; era:roleOf rorg:MF-US-GC001-224 ; era:hasRole era-organisation-roles:Applicant ] ;
  dcterms:audience [ a era:OrganisationRole ; era:roleOf rorg:EUAR ; era:hasRole era-organisation-roles:AuthorisingEntity ] ;
  dcterms:identifier "VA-20250715-001" ;
  vpa:constitutedBy erava:vac-71-001-0001-1-001-US-1 ;
  vpa:requestFor erava:71-001-0001-1-001-US-1 ;
  rdfs:comment "To combat terror on the Gotham Railway system, we need the approval to place on the market."@en .

erava:vac-71-001-0001-1-001-US-1 a era:VehicleTypeAuthorisationCase ; # subClassOf vpa:Case
  vpa:permissionType era-va-authcase:NEW ;
  era:typeRegistrationMethod era-va-trm:NewType ;
  rdfs:label "Case 'NEW' to achieve APOM of type 71-001-0001-1-001 in the US"@en ;
  era:areaOfUse <http://publications.europa.eu/resource/authority/country/USA> ;
  era:authorisingMemberState <http://publications.europa.eu/resource/authority/country/USA> ; 
  vpa:concerns eratv:vt-71-001-0001-1-001 , evr:bat-mobile-metro-001 ;
  vpa:constitutes erava:va-71-001-0001-1-001-US-1 .

erava:71-001-0001-1-001-US-1 a era:VehicleTypeAuthorisation ;
  dcterms:identifier "US5120250001" ;
  # NOT YET dcterms:issued
  # NOT YET vpa:valid
  # NOT YET era:vehicleTypeAuthorisationHolder [ a era:OrganisationRole ] ;
  vpa:requestedIn erava:va-71-001-0001-1-001-US-1 .

gotham:debo-71-001-0001-1-001-US a era:CABEvidence ;
  rdfs:label "DeBo checks on the Gotham City local rules";
  rdfs:member gotham:debo-123 , gotham:debo-456 ;
  vpa:statesCompliance [ a vpa:Compliance ;
    vpa:compliant "true"^^xsd:boolean ;
    vpa:checkedSection "2.1.1 Strength and integrity" , "3.1 Vehicle gauge" , "3.2.1 Running safety and dynamics", "3.3.5 Sanding system" , "3.3.7 Axle shaft", "4.1 Functional requirements for braking at train level" , "4.5 Brake performance" , "12.1.2.2 Other GSM-R requirements", "12.2.1 National on-board signalling systems" ;
    vpa:withRestriction [
      a era:VehicleTypeAuthorisationRestriction ; # subClassOf vpa:Restriction ;
      era:forConfiguration eratv:BatmanSpecial  ;
      era:nonCodedRestrictions "Should not be exposed to extra-terrestrial blast weapons"@en
    ]
  ] ;	
  vpa:supportsCase erava:vac-71-001-0001-1-001-US-1 .

gotham:debo-123 a era:ECCertificate ;
  dcterms:identifier "US001/1/NNTR/2025/RST/EN/WAYNE-001/V01" ;
  dcterms:type era-cld-types:1 ;
  dcterms:source eralex:dir-2016-797 ; # the EU Legislation, as applied in Gotham
  rdfs:label "NNTR verification certificate - underbody, wheelsets, axles, wheels" ;
  vpa:valid [
    a time:ProperInterval ;
    time:hasBeginning "2024-04-01"^^xsd:date ; #start of validity
    time:hasDurationDescription [
        # https://www.w3.org/TR/owl-time/#time:DurationDescription
        time:years 10 ;
    ]
  ].

gotham:debo-456 a era:ECCertificate ;
  dcterms:identifier "US001/1/NNTR/2025/RST/EN/WAYNE-002/V01" ;
  dcterms:type era-cld-types:1 ;
  dcterms:source eralex:dir-2016-797 ; # the EU Legislation, as applied in Gotham
  rdfs:label "NNTR verification certificate - plating, weapons and structure" ;
  vpa:valid [
    a time:ProperInterval ;
    time:hasBeginning "2019-04-01"^^xsd:date ; #start of validity
    time:hasDurationDescription [
        # https://www.w3.org/TR/owl-time/#time:DurationDescription
        time:years 5 ; # example of an expired one.
    ]
  ].

gotham:nobo-71-001-0001-1-001-US a era:CABEvidence ;
  rdfs:label "NoBo covered declarations";
  rdfs:member era-ecd:ecd-123 ;
  vpa:statesCompliance [ a vpa:Compliance ;
    vpa:compliant "false"^^xsd:boolean ;
    vpa:checkedRequirement eralex:reg-2013-1236 , eralex:reg-2014-1304 , eralex:reg-2015-924 , eralex:reg-2013-321  ;
    vpa:withRestriction [
      a era:VehicleTypeAuthorisationRestriction ; # subClassOf vpa:Restriction ;
      era:forConfiguration eratv:BatmanSpecial  ;
      era:nonCodedRestrictions "Not allowed on EU Railways, only to be used in Gotham metro."@en
    ]
  ] ;	
  vpa:supportsCase erava:vac-71-001-0001-1-001-US-1 .

era-ecd:ecd-123 a era:ECDeclaration ;
  dcterms:type era-ecd-types:ECDoV ;
  dcterms:identifier "US/000000GC93653a/2022/000014" ;
  dcterms:label "DoV for Wayne Industries special railway attack vehicle";
  dcterms:creator [ a era:OrganisationRole ; era:roleOf rorg:MF-US-GC001-224 ] ;
  dcterms:requires [ a era:CABEvidence ; rdfs:member era-cld:nobo-123 , era-cld:nobo-456 ];
  dcterms:issued "2022-04-03"^^xsd:date ;
  vpa:versionNumber "1" .

era-cld:nobo-123 a era:CLD ;
  dcterms:identifier "0001/1/SB/2022/RST/EN/WAYN0001/01" ;
  dcterms:type era-cld-types:1 ;
  dcterms:source eralex:dir-2016-797 ; # the EU Legislation, as applied in Gotham
  rdfs:label "TSI RST TE verification certificate" ;
  dcterms:audience [ a era:OrganisationRole ; era:roleOf rorg:MF-US-GC001-224 ] ;
  dcterms:creator [ a era:OrganisationRole ; era:roleOf rorg:NoBo-US-0001 ] ;
  vpa:checkedCompliance [ a era:CABCheck ; vpa:checkedRequirement eralex:reg-2014-1304 ; vpa:isCompliant false ; vpa:withRestriction gotham:clui-123 ] ;
  vpa:valid [
    a time:ProperInterval ;
    time:hasBeginning "2022-04-02"^^xsd:date ; #start of validity
    time:hasDurationDescription [
        # https://www.w3.org/TR/owl-time/#time:DurationDescription
        time:years 10 ;
    ]
  ].

gotham:clui-123 a era:CABRestriction ; # subClassOf era:Restriction
  vpa:regarding eralex:reg-2014-1304 ;
  era:nonCodedRestrictions "The vehicle has a non-compliant mass per wheel"@en .
  
era-cld:nobo-456 a era:CLD ;
  dcterms:identifier "0001/4/SD/2022/RST/EN/WAYN0001/01" ;
  dcterms:type era-cld-types:4 ;
  dcterms:source eralex:dir-2016-797 ; # the EU Legislation, as applied in Gotham
  dcterms:spatial lorg:MF-US-GC002-225 ; # restricted to the audit at production site.
  rdfs:label "TSI RST QMSA verification certificate - secret site" ;
  dcterms:audience [ a era:OrganisationRole ; era:roleOf rorg:MF-US-GC001-224 ] ;
  dcterms:creator [ a era:OrganisationRole ; era:roleOf rorg:NoBo-US-0001 ] ;
  vpa:checkedCompliance [ a era:CABCheck ; vpa:checkedRequirement eralex:reg-2014-1304 ; vpa:isCompliant false ; vpa:withRestriction gotham:clui-456 ] ;
  vpa:valid [
    a time:ProperInterval ;
    time:hasBeginning "2022-04-01"^^xsd:date ; #start of validity
    time:hasDurationDescription [
        # https://www.w3.org/TR/owl-time/#time:DurationDescription
        time:years 2 ; # example of an expired CLD, which should cause the ECD to be declared expired.
    ]
  ].

gotham:clui-456 a era:CABRestriction ; # subClassOf era:Restriction
  vpa:regarding eralex:reg-2014-1304 ;
  era:nonCodedRestrictions "The audit could not take place as access to the secret construction site was not allowed."@en .
  
