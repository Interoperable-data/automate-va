# This VehicleType has one Config
eratv:config1435Hauled a era:VehicleTypeConfiguration ;
    rdfs:label "1435mm / None (for hauled passenger vehicles and special vehicles)"@en ;
    era:wheelSetGauge era-ntg-rinf:30 ;
    era:energySupplySystem era-ess-rinf:None .

eratv:vt-31-110-0008-3-001-001 a era:VehicleType ;
    dcterms:identifier "31-110-0008-3-001-001";
    dcterms:issued "2023-06-12"^^xsd:date ; # the entry of record in ERATV
    dcterms:created "2024-12-17"^^xsd:date ; # this resource in the KG
    rdfs:label "Passenger coach IC 1 - R294 (80 Sitzpl√§tze)"@en ;
    era:vehicleTypeCategory era-vehicle-types-eratv:hauledPassenger ;
    era:vehicleTypeSubCategory era-vehicle-types-eratv:passengerCoach ;
    era:vehicleTypeManufacturer [ a era:OrganisationRole ;
        era:roleOf rorg:WaggonUnionLinkeHoffmannBusch ; # only possible reference, given no more data
    ] ;

    # (some) Parameters independent of a configuration
    era:drivingCabs 0^^xsd:integer ;
    era:magneticBrakingFitted "true"^^xsd:boolean ;
    era:minimumHorizontalRadius 150^^xsd:integer ;
    era:endCouplingType <http://data.europa.eu/949/concepts/end-coupling-type/eratv/Manual> ;

    # (all) config dependent parameters
    era:configDependentParameter [
        a era:VehicleTypeConfigParameterSet ;
        era:forConfiguration eratv:config1435Hauled ;
        era:hasWheelSlideProtectionSystem "true"^^xsd:boolean ;
        era:maximumDesignSpeed 200^^xsd:integer ;
        era:massPerWheel 11125^^xsd:integer ;
        era:totalVehicleMass44500^^xsd:integer ;
        era:axleSpacing "a: 0016,50 m b: 0002,45 m c: 0002,50 m" ;
    ] ;
        
    # Link to its first authorisation case
    vpa:definesCase erava:vac-31-110-0008-3-001-001-1 ;
    
    era:vehicleTypePlatform "DB RIC" .

# Coded and Non-coded CfU & restrictions
eratv:nccfu-31-110-0008-3-001-001-1 a era:VehicleTypeAuthorisationRestriction ;
    era:forConfig eratv:config1435Hauled ;
    era:minimumHorizontalRadius 150 ;
    era:gaugingProfile era-gaugings-rinf:40 ;
    era:maximumDesignSpeed 200 ;
    era:nonCodedRestrictions """1. The vehicles are verified for operation in existing long tunnels in area of use Denmark meaning tunnels with a length of more than 1 km.
2. The vehicles are not allowed to be used in night train service due to missing fire detection system.
3. Staff is required in the coach configuration during passenger traffic in order to ensure communication in emergencies and operation of safety equipment
4. The coaches shall be hauled by a locomotive with an EBO function that has been tested to by fully functional with a configuration of these coaches"""@en .
    

# Link with the underlying authorisation case in which this was submitted in OSS.
# The case {type}-1 must compile the data of authorisation 3.1

# DANMARK - See all authorisation data under 3.1.X.X
erava:vac-31-110-0008-3-001-001-1 a era:VehicleTypeAuthorisationCase ;             # Uses: era:VAAuthorisationCase subClassOf vpa:Case
    vpa:permissionType era-va-authcase:EXT ;                            # implies presence of a era:VehicleAuthorisation in OSS
    era:typeRegistrationMethod era-va-trm:NewType ;    # see: https://github.com/Certiman/automate-va/issues/2
    era:areaOfUse <http://publications.europa.eu/resource/authority/country/DNK> ; # Whole memberstate
    era:authorisingMemberState <http://publications.europa.eu/resource/authority/country/DNK> ; # Whole memberstate

    # Conditions linked to a Configuration
    era:configDependentCondition [ 
        a era:VehicleTypeAuthorisationCheck ; # subClassOf vpa:Compliance
        vpa:checkedSection <IRI to the NNTR causing the restriction> ; # Rarely available
        vpa:withRestriction eratv:nccfu-31-110-0008-3-001-001-1 ;
    ] ;

    # 3.1.3.1.5 Parameters for which conformity to applicable national rules has been assessed
    era:safetyDeclaration "31-110-0008-3-001-001 R294 DECl APPLICANT CONCERNING THE REQUIREMENTS CAPTURE PROCESS AND SIGNIFICV1.0" ;
    era:configDependentCompliance [
        a era:VehicleTypeAuthorisationCheck ; # subClassOf vpa:Compliance
        vpa:checkedSection <1 Documentation>, <3 Track interaction and gauging>, <4 Braking> , ... ;
        vpa:checkedRequirement <http://data.europa.eu/eli/dec_impl/2015/2299/oj> ;
        vpa:withRestriction [
            a era:VehicleTypeAuthorisationCheck ;
            era:forConfiguration eratv:config1435Hauled ;
        ]
    ];
    vpa:supports erava:va-V20230413021 .                                  # A real VA application

erava:va-V20230413021 a era:VehicleTypeAuthorisationApplication ; # vpa:Request , a named node as it was physically submitted in OSS
    vpa:requestFor erava:V20230413021 . # Only the first is needed as we can find corrections by following dcterms:isReplacedBy*
    # other properties via https://eraeuropaeu.sharepoint.com/:x:/r/sites/PMS/_layouts/15/Doc.aspx?sourcedoc=%7BB64105B4-26A3-48C8-8C0F-2EDE62A4B6B3%7D&file=ERA1209-014%20VA-Report%20OSS.xlsx&action=default&mobileredirect=true&DefaultItemOpen=1
    # and via VA Inspector.

# 3.1.3.1 Initial Registration (of the auth)
erava:V20230413021 a era:VehicleTypeAuthorisation ; # subClassOf vpa:Permission ;
    dcterms:identifier "EU8020230120" ;
    rdfs:comment "Existing area of use from previous approvals : DE, NL, AT, CH, PL No evidence found of previous conditions for use for the existing area of use";
    dcterms:issued "2023-06-12"^^xsd:date ; # the document issue date
    era:vehicleTypeAuthorisationHolder 
        [    
            a era:OrganisationRole ;
            era:roleOf rorg:MF-DE-60486-7884 ; # DB Fernverkehr AG
        ];
    vpa:valid [
        a time:ProperInterval ;
        time:hasBeginning "2023-06-12"^^xsd:date ; #start of validity
        time:hasDurationDescription [
            # https://www.w3.org/TR/owl-time/#time:DurationDescription
            time:years 10 ;
        ]
    ].
