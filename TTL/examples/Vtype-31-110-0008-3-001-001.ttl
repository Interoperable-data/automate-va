@base <http://data.europa.eu/949/> .
@prefix era: <http://data.europa.eu/949/> .
@prefix era-sh: <http://data.europa.eu/949/shapes/> .

# From examples
@prefix erapod: <https://storage.inrupt.com/ea779a2c-b43d-4723-8b1a-aaa8990dd576/data/eradis/> .
@prefix gotham: <https://batman.fandom.com/wiki/> .

# General
@prefix as:    <https://www.w3.org/ns/activitystreams#> .
@prefix cc:    <http://creativecommons.org/ns#> .
@prefix dash:  <http://datashapes.org/dash#> .
@prefix dcat:  <http://www.w3.org/ns/dcat#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix dct:  <http://purl.org/dc/terms/> .
@prefix dul:  <http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix geo:  <http://www.opengis.net/ont/geosparql#> .
@prefix gr:   <http://purl.org/goodrelations/v1#> .
@prefix org:  <http://www.w3.org/ns/org#> .
@prefix owl:  <http://www.w3.org/2002/07/owl#> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix schema:  <http://schema.org/> .
@prefix sh:   <http://www.w3.org/ns/shacl#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix time: <http://www.w3.org/2006/time#> .
@prefix unit: <http://qudt.org/vocab/unit/> .
@prefix vcard: <http://www.w3.org/2006/vcard/ns#> .
@prefix vpa: <http://w3id.org/vpa#> .
@prefix vs: <http://www.w3.org/2003/06/sw-vocab-status/ns#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# Domain-specific
@prefix era-cld: <http://data.europa.eu/949/evidences/clds/> .
@prefix era-ecd: <http://data.europa.eu/949/evidences/ecds/> .
@prefix era-perm: <http://data.europa.eu/949/permissions/> .
@prefix eralex: <http://data.europa.eu/949/requirements/legislations/> .
@prefix eralex-pava: <http://data.europa.eu/949/requirements/legislations/pava/> .
@prefix rorg: <http://data.europa.eu/949/organisations/> .
@prefix lorg: <http://data.europa.eu/949/organisations/sites/> .
@prefix uorg: <http://data.europa.eu/949/organisations/units/> .
@prefix eratv: <http://data.europa.eu/949/vehicleTypes/> .
@prefix era-cfg: <http://data.europa.eu/949/vehicleTypes/configurations/> .
@prefix erava: <http://data.europa.eu/949/vehicleTypes/authorisations/> .
@prefix eravr: <http://data.europa.eu/949/vehicles/registrations/> .
@prefix evr: <http://data.europa.eu/949/vehicles/> .
@prefix iss: <http://data.europa.eu/949/iss/> . 


# Relevant SKOS Concept Schemes
@prefix era-skos:      <http://data.europa.eu/949/concepts/> .
@prefix era-tsi:       <http://data.europa.eu/949/concepts/tsi-sections/> .
@prefix era-cld-types: <http://data.europa.eu/949/concepts/cld-types/> .
@prefix era-ecd-types: <http://data.europa.eu/949/concepts/ecd-types/> .
@prefix era-cld-modules:        <http://data.europa.eu/949/concepts/cld-modules/> .
@prefix era-organisation-roles: <http://data.europa.eu/949/concepts/organisation-roles/> .

@prefix era-states:      <http://data.europa.eu/949/concepts/states/> .
@prefix era-va-authcase: <http://data.europa.eu/949/concepts/va-authcases/> .
@prefix era-vtc:         <http://data.europa.eu/949/concepts/vehicle-type-configurations/> .
@prefix era-vehicle-types-eratv: <http://data.europa.eu/949/concepts/vehicle-types/eratv/> .
# unused @prefix era-vehicle-types: <http://data.europa.eu/949/concepts/vehicle-types/> .
@prefix era-ntg-rinf: <http://data.europa.eu/949/concepts/nominal-track-gauges/rinf/> .
@prefix era-ess-rinf: <http://data.europa.eu/949/concepts/energy-supply-systems/rinf/> .
@prefix era-tpls-eratv: <http://data.europa.eu/949/concepts/train-protection-legacy-systems/eratv/> .
@prefix era-tpls-rinf: <http://data.europa.eu/949/concepts/train-protection-legacy-systems/rinf/> .
@prefix era-gaugings-rinf: <http://data.europa.eu/949/concepts/gaugings/rinf/> .
@prefix era-gsmrv-rinf: <http://data.europa.eu/949/concepts/gsmr-versions/rinf/> .
@prefix era-noic: <http://data.europa.eu/949/concepts/noise-categories/NoiseCategories/> .
@prefix era-va-trm: <http://data.europa.eu/949/concepts/va-type-registration-methods/> .
@prefix era-csm: <http://data.europa.eu/949/concepts/contact-strip-materials/> .
@prefix era-tr: <http://data.europa.eu/949/concepts/temperature-ranges/> .
@prefix era-rscv-rinf: <http://data.europa.eu/949/concepts/radio-system-compatibilities-voice/rinf/> .
@prefix era-gsmr-rinf: <http://data.europa.eu/949/concepts/gsmr-networks/rinf/> .
@prefix era-ic-eratv: <http://data.europa.eu/949/concepts/ice-conditions/eratv/> .
@prefix era-rsf-eratv: <http://data.europa.eu/949/concepts/rolling-stock-fire/eratv/> .

 # WARNING: DO NOT (YET) EXIST
@prefix era-permission-types: <http://data.europa.eu/949/concepts/permission-types/> .
@prefix era-ecm-maintenance-functions: <http://data.europa.eu/949/concepts/ecm-maintenance-functions/> .
@prefix era-lex-sections: <http://data.europa.eu/949/concepts/requirements/section/> .
@prefix era-ecm-attestations: <http://data.europa.eu/949/concepts/ecm-attestations/> .
@prefix era-pava-at: <http://data.europa.eu/949/concepts/va-authassessment-types/> .
@prefix era-etcsmanspecset: <http://data.europa.eu/949/concepts/etcs-mandatory-specifications-set/> .
@prefix erava-tsi-conforms: <http://data.europa.eu/949/concepts/tsi-conformities/> .
@prefix issform:  <http://era.europa.eu/forms/iss/> . 

# From ISS
@prefix iss-skos: <https://raw.githubusercontent.com/Interoperable-data/ISS_vocabulary/refs/heads/main/iss-skos/> .
@prefix iss-rs:   <http://data.europa.eu/949/iss/concepts/record-statuses/> .
@prefix iss-dcs: <http://data.europa.eu/949/iss/concepts/document-statuses/> .

# EU Countries
@prefix vac: <https://raw.githubusercontent.com/Interoperable-data/automate-va/refs/heads/dev-lws/TTL/> .


# This VehicleType has one Config
eratv:config1435Hauled a era:VehicleTypeConfiguration ;
    rdfs:label "1435mm / None (for hauled passenger vehicles and special vehicles)"@en ;
    era:wheelSetGauge era-ntg-rinf:30 ;
    era:energySupplySystem era-ess-rinf:None .

eratv:vt-31-110-0008-3-001-001 a era:VehicleType ;
    dcterms:identifier "31-110-0008-3-001-001";
    era:vehicleTypeNumber "31-110-0008-3" ; # Vehicle Type Number
    era:includedVersionsVariant "001-001" ;
    dcterms:issued "2023-06-12"^^xsd:date ; # the entry of record in ERATV
    dcterms:created "2024-12-17"^^xsd:date ; # this resource in the KG
    rdfs:label "Passenger coach IC 1 - R294 (80 Sitzpl√§tze)"@en ;
    era:vehicleTypeCategory era-vehicle-types-eratv:hauledPassenger ;
    era:vehicleTypeSubCategory era-vehicle-types-eratv:passengerCoach ;
    era:vehicleTypeManufacturer [ a era:OrganisationRole ;
        era:roleOf rorg:WaggonUnionLinkeHoffmannBusch ; # only possible reference, given no more data
    ] ;

    # (some) Parameters independent of a configuration
    era:drivingCabs "0"^^xsd:integer ;
    era:magneticBrakingFitted "true"^^xsd:boolean ;
    era:minimumHorizontalRadius "150"^^xsd:integer ;
    era:endCouplingType <http://data.europa.eu/949/concepts/end-coupling-type/eratv/Manual> ;

    # (all) config dependent parameters
    era:configDependentParameter [
        a era:VehicleTypeConfigParameterSet ;
        era:forConfiguration eratv:config1435Hauled ;
        era:hasWheelSlideProtectionSystem "true"^^xsd:boolean ;
        era:maximumDesignSpeed "200"^^xsd:integer ;
        era:massPerWheel "11125"^^xsd:decimal ;
        era:totalVehicleMass "44500"^^xsd:integer ;
        era:axleSpacing "a: 0016,50 m b: 0002,45 m c: 0002,50 m" ;
    ] ;
        
    # Link to its first authorisation case
    vpa:definesCase erava:vac-31-110-0008-3-001-001-DK-1 ;
    
    era:vehicleTypePlatform "DB RIC" .

# Coded and Non-coded CfU & restrictions
eratv:nccfu-31-110-0008-3-001-001-1 a era:VehicleTypeAuthorisationRestriction ;
    era:forConfig eratv:config1435Hauled ;
    era:minimumHorizontalRadius 150 ;
    era:gaugingProfile era-gaugings-rinf:40 ;
    era:maximumDesignSpeed 200 ;
    era:nonCodedRestrictions """1. The vehicles are verified for operation in existing long tunnels in area of use Denmark meaning tunnels with a length of more than 1 km.
2. The vehicles are not allowed to be used in night train service due to missing fire detection system.
3. Staff is required in the coach configuration during passenger traffic in order to ensure communication in emergencies and operation of safety equipment
4. The coaches shall be hauled by a locomotive with an EBO function that has been tested to by fully functional with a configuration of these coaches"""@en .
    

# Link with the underlying authorisation case in which this was submitted in OSS.
# The case {type}-1 must compile the data of authorisation 3.1

# DANMARK - See all authorisation data under 3.1.X.X
erava:vac-31-110-0008-3-001-001-DK-1 a era:VehicleTypeAuthorisationCase ;    # Uses: era:VAAuthorisationCase subClassOf vpa:Case
    vpa:permissionType era-va-authcase:EXT ;                                 # implies presence of a era:VehicleAuthorisation in OSS
    era:typeRegistrationMethod era-va-trm:NewType ;    # see: https://github.com/Certiman/automate-va/issues/2
    era:areaOfUse <http://publications.europa.eu/resource/authority/country/DNK> ; # Whole memberstate
    era:authorisingMemberState <http://publications.europa.eu/resource/authority/country/DNK> ; # Whole memberstate

    # Conditions linked to a Configuration
    era:configDependentCondition [ 
        a era:VehicleTypeAuthorisationCheck ; # subClassOf vpa:Compliance
        # vpa:checkedSection <IRI to the NNTR causing the restriction> ; # Rarely available
        vpa:withRestriction eratv:nccfu-31-110-0008-3-001-001-1 ;
    ] ;

    # 3.1.3.1.5 Parameters for which conformity to applicable national rules has been assessed
    era:safetyDeclaration "31-110-0008-3-001-001 R294 DECl APPLICANT CONCERNING THE REQUIREMENTS CAPTURE PROCESS AND SIGNIFICV1.0" ;
    era:configDependentCompliance [
        a era:VehicleTypeAuthorisationCheck ; # subClassOf vpa:Compliance
        # vpa:checkedSection <1 Documentation>, <3 Track interaction and gauging>, <4 Braking> , ... ;
        vpa:checkedRequirement <http://data.europa.eu/eli/dec_impl/2015/2299/oj> ;
        vpa:withRestriction [
            a era:VehicleTypeAuthorisationRestriction ;
            era:forConfiguration eratv:config1435Hauled ;
        ]
    ];
    vpa:supports erava:va-V20230413021 .                                  # A real VA application

erava:va-V20230413021 a era:VehicleTypeAuthorisationApplication ; # vpa:Request , a named node as it was physically submitted in OSS
    vpa:requestFor erava:V20230413021 . # Only the first is needed as we can find corrections by following dcterms:isReplacedBy*
    # other properties via https://eraeuropaeu.sharepoint.com/:x:/r/sites/PMS/_layouts/15/Doc.aspx?sourcedoc=%7BB64105B4-26A3-48C8-8C0F-2EDE62A4B6B3%7D&file=ERA1209-014%20VA-Report%20OSS.xlsx&action=default&mobileredirect=true&DefaultItemOpen=1
    # and via VA Inspector.

# 3.1.3.1 Initial Registration (of the auth)
erava:V20230413021 a era:VehicleTypeAuthorisation ; # subClassOf vpa:Permission ;
    dcterms:identifier "EU8020230120" ;
    rdfs:comment "Existing area of use from previous approvals : DE, NL, AT, CH, PL No evidence found of previous conditions for use for the existing area of use";
    dcterms:issued "2023-06-12"^^xsd:date ; # the document issue date
    era:vehicleTypeAuthorisationHolder 
        [    
            a era:OrganisationRole ;
            era:roleOf rorg:MF-DE-60486-7884 ; # DB Fernverkehr AG
        ];
    vpa:valid [
        a time:ProperInterval ;
        time:hasBeginning "2023-06-12"^^xsd:date ; #start of validity
        time:hasDurationDescription [
            # https://www.w3.org/TR/owl-time/#time:DurationDescription
            time:years 10 ;
        ]
    ].
